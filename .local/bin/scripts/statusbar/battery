#!/bin/sh

# Check to make sure a battery is present
[ ! -e /sys/class/power_supply/BAT?* ] && echo "AC" && exit 1

for BAT in /sys/class/power_supply/BAT?*
do
    # Grab and format
    stat=$(cat "$BAT/status")
    case "$stat" in
        "Full") stat="" ;;
        "Discharging") stat="" ;;
        "Charging") stat="" ;;
        "Not charging") stat="" ;;
        "Unknown") stat="" ;;
    esac
    now=$(cat "$BAT/capacity")
    printf "%s%s%%\n" "$stat" "$now";
done
